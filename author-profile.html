<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Author Profile | Eternal Lines</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;700&family=Poppins:wght@400;500&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

<style>
body {
  margin: 0;
  background: #ecb5554d;
  font-family: 'Poppins', sans-serif;
  color: #2b1f1f;

  padding-top: 70px; /* üî• FIX for fixed navbar */
}

a { text-decoration: none; color: inherit; }


/* ================= NAVBAR ================= */
.navbar {
  position: fixed;
  top: 0;
  width: 100%;
  height: 60px;
  background: linear-gradient(
        rgba(63, 42, 30, 0.95),
        rgba(63, 42, 30, 0.95)
    );
  display: flex;
  align-items: center;
  z-index: 9999;
}

.navbar .container {
  width: 100%;
  max-width: 1200px;
  padding: 0 20px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.navbar img {
  height: 50px;
}

.nav-links {
  display:flex;
  gap: 2rem;
  font-size: 0.95rem;   /* PERFECT at 100% */
    padding: 6px 0;
}

.nav-links a {
  color: #f2f6ff !important;
  
    transition: 0.3s;
  font-size: 18px;
    text-decoration: none;
  font-weight: 600;
font-family: 'Cormorant Garamond', serif;
}

.nav-links a:hover {
  color: #ffffff !important;
    text-shadow: 0px 0px 8px rgba(255,255,255);
}
/* ================= MOBILE NAVBAR ================= */
@media (max-width: 768px) {

  .navbar {
    height: 56px;
    padding: 0;
  }

  .navbar .container {
    padding: 0 14px;
  }

  .navbar img {
    height: 38px; /* smaller logo */
  }

  /* Hide desktop links */
  .nav-links {
    display: none;
  }

  /* Mobile menu button */
  .menu-toggle {
    font-size: 26px;
    color: #f2f6ff;
    cursor: pointer;
    user-select: none;
  }

  /* Mobile dropdown */
  .nav-links.mobile-open {
    display: flex;
    position: absolute;
    top: 56px;
    left: 0;
    width: 100%;
    flex-direction: column;
    gap: 0;
    background: linear-gradient(
      rgba(158, 56, 10, 0.98),
      rgba(51, 1, 1, 0.98)
    );
    padding: 14px 0;
    box-shadow: 0 12px 30px rgba(0,0,0,0.35);
  }

  .nav-links.mobile-open a {
    padding: 14px 20px;
    font-size: 1.05rem;
    border-bottom: 1px solid rgba(255,255,255,0.12);
  }

  .nav-links.mobile-open a:last-child {
    border-bottom: none;
  }
}

.follow-btn {
  align-self: center;

  padding: 8px 50px;
  
  font-size: 0.95rem;
  font-weight: 600;
  letter-spacing: 0.6px;

  color: #3b1d0f;
  background: linear-gradient(
    rgba(245, 230, 200, 0.9),
    rgba(220, 190, 150, 0.9)
  );

  border: 1px solid rgba(140, 100, 50, 0.45);
  border-radius: 20px;

  cursor: pointer;

  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.6),
    0 6px 14px rgba(0,0,0,0.18);

  transition: all 0.25s ease;
}


.profile-header {
  display: flex;
  align-items: center;
  gap: 26px;

  padding: 28px 32px;
  margin: 40px auto 20px;

  max-width: 920px;

  background: rgba(236, 8, 8, 0.33); /* warm paper transparency */
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);

  border-radius: 22px;
  box-shadow: 
    0 10px 30px rgba(0, 0, 0, 0.08),
    inset 0 0 0 1px rgba(180, 150, 100, 0.25);
}

.profile-avatar img {
  width: 110px;
  height: 110px;
  border-radius: 50%;
  object-fit: cover;

  background: #f3ead8;
  padding: 6px;

  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}


.profile-info {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.profile-info h1 {
  font-family: 'Cormorant Garamond', serif;
  font-size: 2.6rem;
  margin: 0;
}

.profile-info p {
  max-width: 600px;
  margin: 0;
  opacity: .95;
}

.stats {
  display: inline-flex;        /* shrink to content */
  gap: 18px;
  font-size: 0.9rem;
  margin-top: 10px;

  padding: 8px 18px;
  background: rgba(255, 255, 255, 0.764); /* antique gold transparent */
  border-radius: 14px;

  box-shadow:
    inset 0 0 0 1px rgba(160, 120, 70, 0.25),
    0 4px 12px rgba(0, 0, 0, 0.08);
}

.quotes-section {
  max-width: 1200px;
  margin: 40px auto;
  padding: 0 20px;
}

.quotes-section h2 {
  text-align: center;
  font-family: 'Cormorant Garamond', serif;
  font-size: 2.2rem;
  color: #31190b;
  margin-top: -10px;
}



.quote-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-top: 35px;
}


.quote-card {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    transform: rotate(calc(-1deg + 2deg * random()));
    padding: 15px;
    min-height: 200px;
              position: relative;

    border-radius: 10px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    margin: 5px;

    box-shadow: 0 8px 18px rgba(0,0,0,0.35);

    transition: transform 0.3s ease, box-shadow 0.3s ease;
}


/* Hover feel */
.quote-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 14px 30px rgba(0,0,0,0.45);
}

/* Text readability */
.quote-text {
    font-family: 'Georgia', serif;
    font-size: 1rem;
    font-weight: 600;
    font-style: italic;
    color: #333;
    line-height: 1.5;
    text-shadow: 0 1px 1px rgba(255,255,255,0.6);
}

/* AUTHOR ALIGNMENT */
.quote-author {
  font-family: 'Playfair Display', serif;
  font-size: 0.95rem;
  margin-top: 8px;
  text-align: right;
}

/* AUTHOR LINK STYLE (override Bootstrap) */
.quote-author .author-link {
  display: inline-block;
  padding: 3px 10px;
  background: rgba(0, 0, 0, 0.06);
  color: #830000 !important;
  font-style: italic;
  border-left: 3px solid #a67c52;
  text-decoration: none !important;
}


/* HOVER */
.quote-author .author-link:hover {
 background: rgba(176, 141, 87, 0.28);
  color: #6f522f !important;
}


.icon-bar {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    font-size: 1.2rem;
    margin-top: 10px;
}
.icon-bar i {
    cursor: pointer;
    transition: color 0.3s;
}
.icon-bar i:hover {
    color: #0d6efd;
}
/* Icon Bar */
.icon-bar span,
.icon-bar a {
  cursor: pointer;
  font-size: 14px;
}

.loader, .error {
  text-align: center;
  font-size: 1.2rem;
  margin-top: 80px;
}

/* MOBILE */
@media (max-width: 768px) {
  .profile-header {
    flex-direction: column;
    text-align: center;
    gap: 15px;
  }
  #followBtn {
    margin: 0 auto;
  }
}
</style>
</head>

<body>

    <nav class="navbar">
  <div class="container">
    <a href="/">
      <img src="/images/eternal-lines-logo.png" alt="Eternal Lines">
    </a>
    <div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>

    <div class="nav-links">
      <a href="/">Home</a>
      <a href="/quotes">Quotes</a>
      <a href="/submit-quote">Submit-Quote</a>
      <a href="/authors">Authors</a>
      <a href="/Languagesquotes.html">Languages</a>
    </div>
  </div>
</nav>


<div class="profile-banner" id="profileBanner"></div>

<section class="profile-header">
  <div class="profile-avatar">
    <img id="authorAvatar" src="/images/no profile.png">
  </div>

  <div class="profile-info">
    <h1 id="authorName"></h1>
    <p id="authorBio"></p>

    <div class="stats">
      <span id="statQuotes"></span>
      <span id="statLikes"></span>
      <span id="statFollowers"></span>
    </div>

<button id="followBtn" class="follow-btn">
  Follow
</button>

  </div>
</section>


<section class="quotes-section">
  <h2 id="quotesHeading"></h2>
  <div id="quotesContainer" class="quote-grid">
    <div class="loader">Loading quotes‚Ä¶</div>
  </div>
</section>

<script>
const API = {
  SEARCH_AUTHOR: u => `https://eternal-lines.com/api/users/?q=${u}`,
  ALL_QUOTES: `https://eternal-lines.com/api/quotes/`
};

const paperBackgrounds = [
  "/images/bg1.png","/images/bg2.png","/images/image.png","/images/bg4.png","/images/bg5.png"
];

function getAuthorFromURL() {
  // NEW SEO URL: /author/gulzar
  const pathMatch = window.location.pathname.match(/^\/author\/([^\/]+)/);
  if (pathMatch) return pathMatch[1];

  // OLD URL fallback: ?author=gulzar
  return new URLSearchParams(window.location.search).get("author");
}

function getRandomPaper() {
  return paperBackgrounds[Math.floor(Math.random() * paperBackgrounds.length)];
}

async function loadAuthorProfile() {
  const username = getAuthorFromURL();
  if (!username) return;

  const res = await fetch(API.SEARCH_AUTHOR(username));
  const data = await res.json();

  const author = data.find(
    u => u.username.toLowerCase() === username.toLowerCase()
  );
  if (!author) return;

  renderAuthor(author);
  loadAuthorQuotes(author.username, author.full_name);
}

function renderAuthor(a) {
  document.title = `Quotes by ${a.full_name || a.username} | Eternal Lines`;

  authorName.textContent = a.full_name || a.username;
  authorBio.textContent = a.bio || "No biography available.";

  statQuotes.textContent = `${a.total_quotes_posted || 0} Quotes`;
  statLikes.textContent = `${a.total_likes_for_his_quotes || 0} Likes`;
  statFollowers.textContent = `${a.followers_count || 0} Followers`;

  profileBanner.style.backgroundImage =
    `url(${a.profile_background || "images/h1.jpg"})`;

  authorAvatar.src = a.profile_image || "images/no profile.png";

  quotesHeading.textContent = `Quotes by ${a.full_name || a.username}`;
}

async function loadAuthorQuotes(username) {
  quotesContainer.innerHTML = "";

  const res = await fetch(API.ALL_QUOTES);
  const data = await res.json();
  const quotes = (data.results || data).filter(
    q => q.author_username === username
  );

  if (!quotes.length) {
    quotesContainer.innerHTML = `<div class="error">No quotes found</div>`;
    return;
  }

  quotes.forEach(q => {
    quotesContainer.innerHTML += `
      <div class="quote-card h-100 shadow rounded p-3 d-flex flex-column justify-content-between"
      style="background-image: url('${getRandomPaper()}') !important; cursor:pointer;"
           onclick="openQuotePage(event, '${q.slug}')">
           <p class="quote-text flex-grow-1 fw-bolder  ">‚Äú${q.text}‚Äù</p>
<p class="quote-author mt-2 text-end">
  ‚Äî 
  <a href="author-profile.html?author=${q.author_username}" class="author-link">
    ${q.full_name || q.author_username}
  </a>
</p>
        <hr style="border:2px solid #000; margin:8px 0;">

       <div class="d-flex justify-content-between mt-3 icon-bar">
          <span class="material-symbols-outlined like-btn" data-id="${q.id}">
  favorite_border
  <span class="action-count">${q.likes_count || 0}</span>
</span>


          <span class="material-symbols-outlined share-btn"
      data-slug="${q.slug}">
  <span class="icon-text">share</span>
  <span class="action-count share-count">${q.share_count || 0}</span>
</span>

          <span class="material-symbols-outlined save-btn"
                data-id="${q.id}"
                data-saved="${q.saved_by_current_user}">
            ${q.saved_by_current_user ? 'bookmark' : 'bookmark_border'}
            <span class="action-count save-count">${q.saved_count || 0}</span>
          </span>

          <a href="comments.html?quote=${q.id}">
            <span class="material-symbols-outlined">chat_bubble</span>
          </a>
        </div>
      </div>`;
  });
}

function openQuote(e, slug) {
  if (e.target.closest(".material-symbols-outlined")) return;
  window.location.href = `/quote/${slug}`;
}

document.addEventListener("DOMContentLoaded", loadAuthorProfile);
</script>

    <script src="Script/Sharebuttons.js"></script>
    <script src="Script/LikeButtons.js"></script>
    <script src="Script/SaveButtons.js"></script>
</body>
</html>
